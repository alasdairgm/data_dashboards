ui <- dashboardPage(
  dashboardHeader(), ## adds a header
  dashboardSidebar(), ## adds a sidebar
  
  dashboardBody(
    tabsetPanel(type = "tabs",
                tabPanel("Star ratings", # tab 1 is to show ratings and prices
                         br(),
                         fluidRow(
                           column(
                             6,
                             selectInput(
                               inputId = "theme",
                               label = "Which theme?",
                               # choices = str_to_title(unique(lego$theme_name))
                               choices = unique(lego$theme_name)
                             )
                           ),
                         ),
                         # add a button to delay execution until we've selected all our desired filters
                         actionButton(inputId = "update", label =  "Update Everything"),
                         tags$br(),
                         tags$br(),
                         fluidRow(
                           column(6, plotOutput("rating_plot")), # ratings histogram
                           column(6, plotOutput("price_plot"))  # ratings vs price scatterplot
                         ),
                         tags$br(),
                         tags$br(),
                         tags$br(),
                         fluidRow(
                           column(
                             12,
                             DT::DTOutput("lego_table") # data table
                           )
                         )
                ),
                ###### tab 2 - ratings by theme ######              
                tabPanel("Average ratings", 
                         br(),
                         fluidRow(
                           column(
                             4,
                             radioButtons(
                               inputId = "plot_type",
                               label = "Choose a plot type",
                               choices = c("Simple bar chart",  "Gnarly box plot")
                             )
                           )
                         ),
                         fluidRow(
                           column(width = 7,
                          plotOutput("av_rating_plot")
                           ),
                          column(width = 5,
                           plotOutput("av_rating_plot_zoomed")
                          )
                         ),
                         fluidRow(
                           column(width = 5,
                                  offset = 7,
                                  "*top 5 highest rated themes (including ties) with 5 or more sets")
                         )
                ),
                ###### tab 3 - legoland map ######
                
                tabPanel("Legoland locations", 
                         fluidRow(
                           column(
                             width = 8,
                             offset = 2,
                             br(),
                             h2("Legoland locations across the world"),
                             h4(" - click, drag, and zoom as you please")
                           )
                         ),
                         br(),
                         
                         fluidRow(
                           column(
                             width = 8,
                             offset = 2,
                             leafletOutput("legoland_plot") 
                           )
                         )
                )
    )
  )
)